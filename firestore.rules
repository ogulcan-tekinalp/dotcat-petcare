rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Users collection - her kullanıcı sadece kendi verilerine erişebilir
    match /users/{userId} {
      // Kullanıcı kimlik doğrulaması yapılmış olmalı (anonim dahil)
      allow read, write: if request.auth != null && request.auth.uid == userId;
      
      // Cats subcollection
      match /cats/{catId} {
        allow read, write: if request.auth != null && request.auth.uid == userId;
      }
      
      // Reminders subcollection
      match /reminders/{reminderId} {
        allow read, write: if request.auth != null && request.auth.uid == userId;
      }
      
      // Weights subcollection
      match /weights/{weightId} {
        allow read, write: if request.auth != null && request.auth.uid == userId;
      }
      
      // Reminder Completions subcollection
      match /reminder_completions/{completionId} {
        allow read, write: if request.auth != null && request.auth.uid == userId;
      }
    }
  }
}

